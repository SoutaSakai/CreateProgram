#pragma once
#include"vivid.h"
#include"../../Charactermanager/CharacterID.h"
#include"../../Charactermanager/Charactermanager.h"

#include"../playermanager.h"

#include"../../skilmanager/skilmanager.h"

class Player
{
public:
	Player();
	 
	void Initialize(vivid::controller::DEVICE_ID Player_ID, float Xpos);

	void Update(void);

	void InUseCharacter(CHARACTER_ID first, CHARACTER_ID second, CHARACTER_ID third);
	void InUseCharacter(CHARACTER_ID first);

	void ChangeRound(void);

	//コントローラの入力処理
	void Controller(void);

	//スティックの入力で角度を求める
	void CharacterStick(void);

	//キーボード入力処理
	void Keyboard(void);

	//画面外に出ないように
	void CheckWall(void);

	void Draw();

	void Finalize(void);

	void Setting(vivid::Vector2 pos,float scale ,float angle,bool skilflag);

	//今のラウンドの使ってるキャラクターIDを渡す
	CHARACTER_ID GetUseCharacter(void) const { return UseCharacter[CharaNo]; }
	//プレイヤーの座標を渡す
	vivid::Vector2 GetPlayerPosition(void) const { return CharacterPos; }
	//プレイヤーの角度を渡す
	float GetPlayerAngle(void) const { return Angle; }
	//プレイヤーの横幅と立幅を渡す
	float GetPlayerWidth(void) const { return CharaWIDTH; }
	float GetPlayerHeight(void) const { return CharaHEIGHT; }
	

private:
	vivid::controller::DEVICE_ID m_PlayerID;

	CHARACTER_ID UseCharacter[3];

	vivid::Vector2 CharacterPos;	//characterの座標

	float CharaWIDTH;				//characterの横幅
	float CharaHEIGHT;				//characterの立幅
	float CharaSpeed;				//characterのスピード
	vivid::Rect CharaRect;			//characterのrect
	std::string CharaFilePath;		//characterのファイルパス
	vivid::Vector2 CharaMouthPos;	//characterの口の位置
	float CharaMouthRadius;			//characterの口の半径

	int	CharaNo;					//今のラウンドのキャラ

	vivid::Vector2 Anchor;			//characterの中心
	float Angle;					//characterの角度
	vivid::Vector2 Scale;			//characterの拡大率

	static const float WaterHEIGHT;

};

